'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    // Primero obtener las regiones para mapear los IDs
    const regiones = await queryInterface.sequelize.query(
      'SELECT id, nombre FROM "Regiones" ORDER BY id',
      { type: Sequelize.QueryTypes.SELECT }
    );

    const regionMap = {};
    regiones.forEach(region => {
      regionMap[region.nombre] = region.id;
    });

    const comunas = [
      // Región de Tarapacá (I)
      { nombre: 'Iquique', regionId: regionMap['Tarapacá'] },
      { nombre: 'Alto Hospicio', regionId: regionMap['Tarapacá'] },
      { nombre: 'Pozo Almonte', regionId: regionMap['Tarapacá'] },
      { nombre: 'Camiña', regionId: regionMap['Tarapacá'] },
      { nombre: 'Colchane', regionId: regionMap['Tarapacá'] },
      { nombre: 'Huara', regionId: regionMap['Tarapacá'] },
      { nombre: 'Pica', regionId: regionMap['Tarapacá'] },

      // Región de Antofagasta (II)
      { nombre: 'Antofagasta', regionId: regionMap['Antofagasta'] },
      { nombre: 'Mejillones', regionId: regionMap['Antofagasta'] },
      { nombre: 'Sierra Gorda', regionId: regionMap['Antofagasta'] },
      { nombre: 'Taltal', regionId: regionMap['Antofagasta'] },
      { nombre: 'Calama', regionId: regionMap['Antofagasta'] },
      { nombre: 'Ollagüe', regionId: regionMap['Antofagasta'] },
      { nombre: 'San Pedro de Atacama', regionId: regionMap['Antofagasta'] },
      { nombre: 'Tocopilla', regionId: regionMap['Antofagasta'] },
      { nombre: 'María Elena', regionId: regionMap['Antofagasta'] },

      // Región de Atacama (III)
      { nombre: 'Copiapó', regionId: regionMap['Atacama'] },
      { nombre: 'Caldera', regionId: regionMap['Atacama'] },
      { nombre: 'Tierra Amarilla', regionId: regionMap['Atacama'] },
      { nombre: 'Chañaral', regionId: regionMap['Atacama'] },
      { nombre: 'Diego de Almagro', regionId: regionMap['Atacama'] },
      { nombre: 'Vallenar', regionId: regionMap['Atacama'] },
      { nombre: 'Alto del Carmen', regionId: regionMap['Atacama'] },
      { nombre: 'Freirina', regionId: regionMap['Atacama'] },
      { nombre: 'Huasco', regionId: regionMap['Atacama'] },

      // Región de Coquimbo (IV)
      { nombre: 'La Serena', regionId: regionMap['Coquimbo'] },
      { nombre: 'Coquimbo', regionId: regionMap['Coquimbo'] },
      { nombre: 'Andacollo', regionId: regionMap['Coquimbo'] },
      { nombre: 'La Higuera', regionId: regionMap['Coquimbo'] },
      { nombre: 'Paiguano', regionId: regionMap['Coquimbo'] },
      { nombre: 'Vicuña', regionId: regionMap['Coquimbo'] },
      { nombre: 'Illapel', regionId: regionMap['Coquimbo'] },
      { nombre: 'Canela', regionId: regionMap['Coquimbo'] },
      { nombre: 'Los Vilos', regionId: regionMap['Coquimbo'] },
      { nombre: 'Salamanca', regionId: regionMap['Coquimbo'] },
      { nombre: 'Ovalle', regionId: regionMap['Coquimbo'] },
      { nombre: 'Combarbalá', regionId: regionMap['Coquimbo'] },
      { nombre: 'Monte Patria', regionId: regionMap['Coquimbo'] },
      { nombre: 'Punitaqui', regionId: regionMap['Coquimbo'] },
      { nombre: 'Río Hurtado', regionId: regionMap['Coquimbo'] },

      // Región de Valparaíso (V)
      { nombre: 'Valparaíso', regionId: regionMap['Valparaíso'] },
      { nombre: 'Casablanca', regionId: regionMap['Valparaíso'] },
      { nombre: 'Concón', regionId: regionMap['Valparaíso'] },
      { nombre: 'Juan Fernández', regionId: regionMap['Valparaíso'] },
      { nombre: 'Puchuncaví', regionId: regionMap['Valparaíso'] },
      { nombre: 'Quintero', regionId: regionMap['Valparaíso'] },
      { nombre: 'Viña del Mar', regionId: regionMap['Valparaíso'] },
      { nombre: 'Isla de Pascua', regionId: regionMap['Valparaíso'] },
      { nombre: 'Los Andes', regionId: regionMap['Valparaíso'] },
      { nombre: 'Calle Larga', regionId: regionMap['Valparaíso'] },
      { nombre: 'Rinconada', regionId: regionMap['Valparaíso'] },
      { nombre: 'San Esteban', regionId: regionMap['Valparaíso'] },
      { nombre: 'La Ligua', regionId: regionMap['Valparaíso'] },
      { nombre: 'Cabildo', regionId: regionMap['Valparaíso'] },
      { nombre: 'Papudo', regionId: regionMap['Valparaíso'] },
      { nombre: 'Petorca', regionId: regionMap['Valparaíso'] },
      { nombre: 'Zapallar', regionId: regionMap['Valparaíso'] },
      { nombre: 'Quillota', regionId: regionMap['Valparaíso'] },
      { nombre: 'Calera', regionId: regionMap['Valparaíso'] },
      { nombre: 'Hijuelas', regionId: regionMap['Valparaíso'] },
      { nombre: 'La Cruz', regionId: regionMap['Valparaíso'] },
      { nombre: 'Nogales', regionId: regionMap['Valparaíso'] },
      { nombre: 'San Antonio', regionId: regionMap['Valparaíso'] },
      { nombre: 'Algarrobo', regionId: regionMap['Valparaíso'] },
      { nombre: 'Cartagena', regionId: regionMap['Valparaíso'] },
      { nombre: 'El Quisco', regionId: regionMap['Valparaíso'] },
      { nombre: 'El Tabo', regionId: regionMap['Valparaíso'] },
      { nombre: 'Santo Domingo', regionId: regionMap['Valparaíso'] },
      { nombre: 'San Felipe', regionId: regionMap['Valparaíso'] },
      { nombre: 'Catemu', regionId: regionMap['Valparaíso'] },
      { nombre: 'Llaillay', regionId: regionMap['Valparaíso'] },
      { nombre: 'Panquehue', regionId: regionMap['Valparaíso'] },
      { nombre: 'Putaendo', regionId: regionMap['Valparaíso'] },
      { nombre: 'Santa María', regionId: regionMap['Valparaíso'] },
      { nombre: 'Quilpué', regionId: regionMap['Valparaíso'] },
      { nombre: 'Limache', regionId: regionMap['Valparaíso'] },
      { nombre: 'Olmué', regionId: regionMap['Valparaíso'] },
      { nombre: 'Villa Alemana', regionId: regionMap['Valparaíso'] },

      // Región del Libertador General Bernardo O'Higgins (VI)
      { nombre: 'Rancagua', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Codegua', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Coinco', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Coltauco', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Doñihue', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Graneros', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Las Cabras', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Machalí', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Malloa', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Mostazal', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Olivar', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Peumo', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Pichidegua', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Quinta de Tilcoco', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Rengo', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Requínoa', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'San Vicente de Tagua Tagua', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Pichilemu', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'La Estrella', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Litueche', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Marchihue', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Navidad', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Paredones', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'San Fernando', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Chépica', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Chimbarongo', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Lolol', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Nancagua', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Palmilla', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Peralillo', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Placilla', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Pumanque', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },
      { nombre: 'Santa Cruz', regionId: regionMap['Libertador General Bernardo O\'Higgins'] },

      // Región del Maule (VII)
      { nombre: 'Talca', regionId: regionMap['Maule'] },
      { nombre: 'Constitución', regionId: regionMap['Maule'] },
      { nombre: 'Curepto', regionId: regionMap['Maule'] },
      { nombre: 'Empedrado', regionId: regionMap['Maule'] },
      { nombre: 'Maule', regionId: regionMap['Maule'] },
      { nombre: 'Pelarco', regionId: regionMap['Maule'] },
      { nombre: 'Pencahue', regionId: regionMap['Maule'] },
      { nombre: 'Río Claro', regionId: regionMap['Maule'] },
      { nombre: 'San Clemente', regionId: regionMap['Maule'] },
      { nombre: 'San Rafael', regionId: regionMap['Maule'] },
      { nombre: 'Cauquenes', regionId: regionMap['Maule'] },
      { nombre: 'Chanco', regionId: regionMap['Maule'] },
      { nombre: 'Pelluhue', regionId: regionMap['Maule'] },
      { nombre: 'Curicó', regionId: regionMap['Maule'] },
      { nombre: 'Hualañé', regionId: regionMap['Maule'] },
      { nombre: 'Licantén', regionId: regionMap['Maule'] },
      { nombre: 'Molina', regionId: regionMap['Maule'] },
      { nombre: 'Rauco', regionId: regionMap['Maule'] },
      { nombre: 'Romeral', regionId: regionMap['Maule'] },
      { nombre: 'Sagrada Familia', regionId: regionMap['Maule'] },
      { nombre: 'Teno', regionId: regionMap['Maule'] },
      { nombre: 'Vichuquén', regionId: regionMap['Maule'] },
      { nombre: 'Linares', regionId: regionMap['Maule'] },
      { nombre: 'Colbún', regionId: regionMap['Maule'] },
      { nombre: 'Longaví', regionId: regionMap['Maule'] },
      { nombre: 'Parral', regionId: regionMap['Maule'] },
      { nombre: 'Retiro', regionId: regionMap['Maule'] },
      { nombre: 'San Javier', regionId: regionMap['Maule'] },
      { nombre: 'Villa Alegre', regionId: regionMap['Maule'] },
      { nombre: 'Yerbas Buenas', regionId: regionMap['Maule'] },

      // Región del Ñuble (XVI)
      { nombre: 'Chillán', regionId: regionMap['Ñuble'] },
      { nombre: 'Bulnes', regionId: regionMap['Ñuble'] },
      { nombre: 'Chillán Viejo', regionId: regionMap['Ñuble'] },
      { nombre: 'El Carmen', regionId: regionMap['Ñuble'] },
      { nombre: 'Pemuco', regionId: regionMap['Ñuble'] },
      { nombre: 'Pinto', regionId: regionMap['Ñuble'] },
      { nombre: 'Quillón', regionId: regionMap['Ñuble'] },
      { nombre: 'San Ignacio', regionId: regionMap['Ñuble'] },
      { nombre: 'Yungay', regionId: regionMap['Ñuble'] },
      { nombre: 'Quirihue', regionId: regionMap['Ñuble'] },
      { nombre: 'Cobquecura', regionId: regionMap['Ñuble'] },
      { nombre: 'Coelemu', regionId: regionMap['Ñuble'] },
      { nombre: 'Ninhue', regionId: regionMap['Ñuble'] },
      { nombre: 'Portezuelo', regionId: regionMap['Ñuble'] },
      { nombre: 'Ranquil', regionId: regionMap['Ñuble'] },
      { nombre: 'Treguaco', regionId: regionMap['Ñuble'] },
      { nombre: 'San Carlos', regionId: regionMap['Ñuble'] },
      { nombre: 'Coihueco', regionId: regionMap['Ñuble'] },
      { nombre: 'Ñiquén', regionId: regionMap['Ñuble'] },
      { nombre: 'San Fabián', regionId: regionMap['Ñuble'] },
      { nombre: 'San Nicolás', regionId: regionMap['Ñuble'] },

      // Región del Biobío (VIII)
      { nombre: 'Concepción', regionId: regionMap['Biobío'] },
      { nombre: 'Coronel', regionId: regionMap['Biobío'] },
      { nombre: 'Chiguayante', regionId: regionMap['Biobío'] },
      { nombre: 'Florida', regionId: regionMap['Biobío'] },
      { nombre: 'Hualqui', regionId: regionMap['Biobío'] },
      { nombre: 'Lota', regionId: regionMap['Biobío'] },
      { nombre: 'Penco', regionId: regionMap['Biobío'] },
      { nombre: 'San Pedro de la Paz', regionId: regionMap['Biobío'] },
      { nombre: 'Santa Juana', regionId: regionMap['Biobío'] },
      { nombre: 'Talcahuano', regionId: regionMap['Biobío'] },
      { nombre: 'Tomé', regionId: regionMap['Biobío'] },
      { nombre: 'Hualpén', regionId: regionMap['Biobío'] },
      { nombre: 'Lebu', regionId: regionMap['Biobío'] },
      { nombre: 'Arauco', regionId: regionMap['Biobío'] },
      { nombre: 'Cañete', regionId: regionMap['Biobío'] },
      { nombre: 'Contulmo', regionId: regionMap['Biobío'] },
      { nombre: 'Curanilahue', regionId: regionMap['Biobío'] },
      { nombre: 'Los Álamos', regionId: regionMap['Biobío'] },
      { nombre: 'Tirúa', regionId: regionMap['Biobío'] },
      { nombre: 'Los Ángeles', regionId: regionMap['Biobío'] },
      { nombre: 'Antuco', regionId: regionMap['Biobío'] },
      { nombre: 'Cabrero', regionId: regionMap['Biobío'] },
      { nombre: 'Laja', regionId: regionMap['Biobío'] },
      { nombre: 'Mulchén', regionId: regionMap['Biobío'] },
      { nombre: 'Nacimiento', regionId: regionMap['Biobío'] },
      { nombre: 'Negrete', regionId: regionMap['Biobío'] },
      { nombre: 'Quilaco', regionId: regionMap['Biobío'] },
      { nombre: 'Quilleco', regionId: regionMap['Biobío'] },
      { nombre: 'San Rosendo', regionId: regionMap['Biobío'] },
      { nombre: 'Santa Bárbara', regionId: regionMap['Biobío'] },
      { nombre: 'Tucapel', regionId: regionMap['Biobío'] },
      { nombre: 'Yumbel', regionId: regionMap['Biobío'] },
      { nombre: 'Alto Biobío', regionId: regionMap['Biobío'] },

      // Región de La Araucanía (IX)
      { nombre: 'Temuco', regionId: regionMap['La Araucanía'] },
      { nombre: 'Carahue', regionId: regionMap['La Araucanía'] },
      { nombre: 'Cunco', regionId: regionMap['La Araucanía'] },
      { nombre: 'Curarrehue', regionId: regionMap['La Araucanía'] },
      { nombre: 'Freire', regionId: regionMap['La Araucanía'] },
      { nombre: 'Galvarino', regionId: regionMap['La Araucanía'] },
      { nombre: 'Gorbea', regionId: regionMap['La Araucanía'] },
      { nombre: 'Lautaro', regionId: regionMap['La Araucanía'] },
      { nombre: 'Loncoche', regionId: regionMap['La Araucanía'] },
      { nombre: 'Melipeuco', regionId: regionMap['La Araucanía'] },
      { nombre: 'Nueva Imperial', regionId: regionMap['La Araucanía'] },
      { nombre: 'Padre Las Casas', regionId: regionMap['La Araucanía'] },
      { nombre: 'Perquenco', regionId: regionMap['La Araucanía'] },
      { nombre: 'Pitrufquén', regionId: regionMap['La Araucanía'] },
      { nombre: 'Pucón', regionId: regionMap['La Araucanía'] },
      { nombre: 'Saavedra', regionId: regionMap['La Araucanía'] },
      { nombre: 'Teodoro Schmidt', regionId: regionMap['La Araucanía'] },
      { nombre: 'Toltén', regionId: regionMap['La Araucanía'] },
      { nombre: 'Vilcún', regionId: regionMap['La Araucanía'] },
      { nombre: 'Villarrica', regionId: regionMap['La Araucanía'] },
      { nombre: 'Cholchol', regionId: regionMap['La Araucanía'] },
      { nombre: 'Angol', regionId: regionMap['La Araucanía'] },
      { nombre: 'Collipulli', regionId: regionMap['La Araucanía'] },
      { nombre: 'Curacautín', regionId: regionMap['La Araucanía'] },
      { nombre: 'Ercilla', regionId: regionMap['La Araucanía'] },
      { nombre: 'Lonquimay', regionId: regionMap['La Araucanía'] },
      { nombre: 'Los Sauces', regionId: regionMap['La Araucanía'] },
      { nombre: 'Lumaco', regionId: regionMap['La Araucanía'] },
      { nombre: 'Purén', regionId: regionMap['La Araucanía'] },
      { nombre: 'Renaico', regionId: regionMap['La Araucanía'] },
      { nombre: 'Traiguén', regionId: regionMap['La Araucanía'] },
      { nombre: 'Victoria', regionId: regionMap['La Araucanía'] },

      // Región de Los Ríos (XIV)
      { nombre: 'Valdivia', regionId: regionMap['Los Ríos'] },
      { nombre: 'Corral', regionId: regionMap['Los Ríos'] },
      { nombre: 'Lanco', regionId: regionMap['Los Ríos'] },
      { nombre: 'Los Lagos', regionId: regionMap['Los Ríos'] },
      { nombre: 'Máfil', regionId: regionMap['Los Ríos'] },
      { nombre: 'Mariquina', regionId: regionMap['Los Ríos'] },
      { nombre: 'Paillaco', regionId: regionMap['Los Ríos'] },
      { nombre: 'Panguipulli', regionId: regionMap['Los Ríos'] },
      { nombre: 'La Unión', regionId: regionMap['Los Ríos'] },
      { nombre: 'Futrono', regionId: regionMap['Los Ríos'] },
      { nombre: 'Lago Ranco', regionId: regionMap['Los Ríos'] },
      { nombre: 'Río Bueno', regionId: regionMap['Los Ríos'] },

      // Región de Los Lagos (X)
      { nombre: 'Puerto Montt', regionId: regionMap['Los Lagos'] },
      { nombre: 'Calbuco', regionId: regionMap['Los Lagos'] },
      { nombre: 'Cochamó', regionId: regionMap['Los Lagos'] },
      { nombre: 'Fresia', regionId: regionMap['Los Lagos'] },
      { nombre: 'Frutillar', regionId: regionMap['Los Lagos'] },
      { nombre: 'Los Muermos', regionId: regionMap['Los Lagos'] },
      { nombre: 'Llanquihue', regionId: regionMap['Los Lagos'] },
      { nombre: 'Maullín', regionId: regionMap['Los Lagos'] },
      { nombre: 'Puerto Varas', regionId: regionMap['Los Lagos'] },
      { nombre: 'Castro', regionId: regionMap['Los Lagos'] },
      { nombre: 'Ancud', regionId: regionMap['Los Lagos'] },
      { nombre: 'Chonchi', regionId: regionMap['Los Lagos'] },
      { nombre: 'Curaco de Vélez', regionId: regionMap['Los Lagos'] },
      { nombre: 'Dalcahue', regionId: regionMap['Los Lagos'] },
      { nombre: 'Puqueldón', regionId: regionMap['Los Lagos'] },
      { nombre: 'Queilén', regionId: regionMap['Los Lagos'] },
      { nombre: 'Quellón', regionId: regionMap['Los Lagos'] },
      { nombre: 'Quemchi', regionId: regionMap['Los Lagos'] },
      { nombre: 'Quinchao', regionId: regionMap['Los Lagos'] },
      { nombre: 'Osorno', regionId: regionMap['Los Lagos'] },
      { nombre: 'Puerto Octay', regionId: regionMap['Los Lagos'] },
      { nombre: 'Purranque', regionId: regionMap['Los Lagos'] },
      { nombre: 'Puyehue', regionId: regionMap['Los Lagos'] },
      { nombre: 'Río Negro', regionId: regionMap['Los Lagos'] },
      { nombre: 'San Juan de la Costa', regionId: regionMap['Los Lagos'] },
      { nombre: 'San Pablo', regionId: regionMap['Los Lagos'] },
      { nombre: 'Chaitén', regionId: regionMap['Los Lagos'] },
      { nombre: 'Futaleufú', regionId: regionMap['Los Lagos'] },
      { nombre: 'Hualaihué', regionId: regionMap['Los Lagos'] },
      { nombre: 'Palena', regionId: regionMap['Los Lagos'] },

      // Región Aisén del General Carlos Ibáñez del Campo (XI)
      { nombre: 'Coyhaique', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Lago Verde', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Aisén', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Cisnes', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Guaitecas', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Cochrane', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'O\'Higgins', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Tortel', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Chile Chico', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },
      { nombre: 'Río Ibáñez', regionId: regionMap['Aisén del General Carlos Ibáñez del Campo'] },

      // Región de Magallanes y de la Antártica Chilena (XII)
      { nombre: 'Punta Arenas', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Laguna Blanca', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Río Verde', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'San Gregorio', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Cabo de Hornos', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Antártica', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Porvenir', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Primavera', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Timaukel', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Natales', regionId: regionMap['Magallanes y de la Antártica Chilena'] },
      { nombre: 'Torres del Paine', regionId: regionMap['Magallanes y de la Antártica Chilena'] },

      // Región Metropolitana de Santiago (XIII)
      { nombre: 'Santiago', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Cerrillos', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Cerro Navia', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Conchalí', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'El Bosque', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Estación Central', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Huechuraba', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Independencia', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'La Cisterna', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'La Florida', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'La Granja', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'La Pintana', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'La Reina', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Las Condes', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Lo Barnechea', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Lo Espejo', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Lo Prado', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Macul', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Maipú', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Ñuñoa', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Pedro Aguirre Cerda', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Peñalolén', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Providencia', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Pudahuel', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Quilicura', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Quinta Normal', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Recoleta', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Renca', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San Joaquín', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San Miguel', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San Ramón', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Vitacura', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Puente Alto', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Pirque', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San José de Maipo', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Colina', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Lampa', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Tiltil', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San Bernardo', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Buin', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Calera de Tango', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Paine', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Melipilla', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Alhué', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Curacaví', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'María Pinto', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'San Pedro', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Talagante', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'El Monte', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Isla de Maipo', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Padre Hurtado', regionId: regionMap['Metropolitana de Santiago'] },
      { nombre: 'Peñaflor', regionId: regionMap['Metropolitana de Santiago'] }
    ];

    // Filtrar comunas que tienen regionId válido
    const comunasValidas = comunas.filter(comuna => comuna.regionId != null);

    if (comunasValidas.length > 0) {
      await queryInterface.bulkInsert('Comunas', comunasValidas.map(comuna => ({
        ...comuna,
        createdAt: new Date(),
        updatedAt: new Date()
      })), {
        ignoreDuplicates: true
      });
      
      console.log(`✅ Insertadas ${comunasValidas.length} comunas (ignorando duplicados)`);
    }
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('Comunas', null, {});
  }
};